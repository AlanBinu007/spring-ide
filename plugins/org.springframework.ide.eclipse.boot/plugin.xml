<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
  
 
  
<extension
       point="org.eclipse.core.expressions.propertyTesters">
    <propertyTester
          class="org.springframework.ide.eclipse.boot.core.BootPropertyTester"
          id="org.springsource.ide.eclipse.boot.BootPropertyTester"
          namespace="org.springsource.ide.eclipse.boot"
          properties="isBootProject,isBootResource,hasBootDevTools"
          type="org.eclipse.core.resources.IResource">
    <!--       type="java.lang.Object" -->
    </propertyTester>
    <propertyTester
          class="org.springframework.ide.eclipse.boot.core.BootJavaElementPropertyTester"
          id="org.springframework.ide.eclipse.boot.core.BootJavaElementPropertyTester"
          namespace="org.springsource.ide.eclipse.boot.javaelement"
          properties="isInBootProject,isInBootProjectWithDevTools"
          type="org.eclipse.jdt.core.IJavaElement">
    <!--       type="java.lang.Object" -->
    </propertyTester>
 </extension>

    <extension point="org.eclipse.ui.preferencePages">
	 	<page
         category="org.springsource.ide.eclipse.commons.preferencePage"
         class="org.springframework.ide.eclipse.boot.ui.preferences.BootPreferencePage"
         id="org.springframework.ide.eclipse.boot.ui.preferences.BootPreferencePage"
         name="Boot">
   		</page>
   	</extension>
   	
    <extension point="org.eclipse.ui.preferencePages">
	 	<page
         category="org.springframework.ide.eclipse.boot.ui.preferences.BootPreferencePage"
         class="org.springframework.ide.eclipse.boot.ui.preferences.BootInstallPreferencePage"
         id="org.springframework.ide.eclipse.boot.ui.preferences.BootInstallPreferencePage"
         name="CLI">
   		</page>
   <page
         category="org.springframework.ide.eclipse.boot.ui.preferences.BootPreferencePage"
         class="org.springframework.ide.eclipse.boot.ui.preferences.InitializrPreferencePage"
         id="org.springframework.ide.eclipse.boot.ui.preferences.InitializrPreferencePage"
         name="Initializr">
   </page>
   	</extension>
   	
<extension point="org.eclipse.ui.decorators">
<decorator
    id="org.springframework.ide.eclipse.boot.ui.DevtoolsProjectDecorator"
    label="Spring Boot Project Decorator"
    lightweight="true"
    state="true"
    class= "org.springframework.ide.eclipse.boot.ui.BootProjectDecorator">
    <description>
      Decorates projects to show when a project's classpath contains Spring Boot Elements. 
    </description>
    <enablement>
       <or>
	       <objectClass
	             name="org.eclipse.jdt.core.IJavaProject">
	       </objectClass>
	       <objectClass
	             name="org.eclipse.core.resources.IProject">
	       </objectClass>
	   </or>
    </enablement>
  </decorator>
</extension>

<extension point="org.eclipse.ltk.core.refactoring.renameParticipants">
  <renameParticipant class="org.springframework.ide.eclipse.boot.refactoring.TypeRenameParticipant" id="org.springframework.ide.eclipse.boot.refactoring.TypeRenameParticipant" name="Rename Companion Type Rename Participant">
    <enablement>
      <with variable="affectedNatures">
        <iterate operator="or">
          <equals value="org.eclipse.jdt.core.javanature"/>
        </iterate>
      </with>
      <with variable="element">
        <instanceof value="org.eclipse.jdt.core.IType"/>
      </with>
    </enablement>
  </renameParticipant>
</extension>
<extension
      point="org.eclipse.core.runtime.preferences">
   <initializer
         class="org.springframework.ide.eclipse.boot.ui.preferences.PreferencesInitializer">
   </initializer>
</extension>
<extension
      point="org.eclipse.ui.handlers">
   <handler
         class="org.springframework.ide.eclipse.boot.ui.EnableDisableBootDevtools"
         commandId="org.springframework.ide.eclipse.boot.ui.EnableDisableBootDevtools">
      <enabledWhen>
         <and>
            <count
                  value="1">
            </count>
            <iterate>
               <or>
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <or>
                        <adapt
                              type="org.eclipse.core.resources.IProject">
                           <and>
                              <test
                                    property="org.eclipse.core.resources.projectNature"
                                    value="org.eclipse.m2e.core.maven2Nature">
                              </test>
                              <test
                                    forcePluginActivation="true"
                                    property="org.springsource.ide.eclipse.boot.isBootProject">
                              </test>
                           </and>
                        </adapt>
                        <test
                              property="org.eclipse.core.resources.name"
                              value="pom.xml">
                        </test>
                     </or>
                  </adapt>
                  <and>
                     <instanceof
                           value="org.eclipse.jdt.core.IJavaProject">
                     </instanceof>
                     <test
                           property="org.springsource.ide.eclipse.commons.java.projectNature"
                           value="org.eclipse.m2e.core.maven2Nature">
                     </test>
                     <test
                           forcePluginActivation="true"
                           property="org.springsource.ide.eclipse.boot.javaelement.isInBootProject">
                     </test>
                  </and>
               </or>
            </iterate>
         </and>
      </enabledWhen>
   </handler>
</extension>
<extension
      point="org.eclipse.ui.commands">
   <command
         categoryId="org.springframework.ide.eclipse.boot.commands.category"
         id="org.springframework.ide.eclipse.boot.ui.EnableDisableBootDevtools"
         name="Add/Remove Boot Devtools">
   </command>
</extension>
<extension
      point="org.eclipse.ui.menus">
   <menuContribution
         allPopups="false"
         locationURI="popup:org.springframework.ide.eclipse.ui.tools?after=boot">
      <command
            commandId="org.springframework.ide.eclipse.boot.ui.EnableDisableBootDevtools"
            id="org.springframework.ide.eclipse.boot.ui.RemoveDevTools"
            label="Remove DevTools"
            style="push">
         <visibleWhen
               checkEnabled="false">
            <and>
               <count
                     value="1">
               </count>
               <iterate>
                  <or>
                     <adapt
                           type="org.eclipse.core.resources.IResource">
                        <or>
                           <adapt
                                 type="org.eclipse.core.resources.IProject">
                              <and>
                                 <test
                                       property="org.eclipse.core.resources.projectNature"
                                       value="org.eclipse.m2e.core.maven2Nature">
                                 </test>
                                 <test
                                       forcePluginActivation="true"
                                       property="org.springsource.ide.eclipse.boot.isBootProject">
                                 </test>
                                 <test
                                       property="org.springsource.ide.eclipse.boot.hasBootDevTools">
                                 </test>
                              </and>
                           </adapt>
                           <test
                                 property="org.eclipse.core.resources.name"
                                 value="pom.xml">
                           </test>
                        </or>
                     </adapt>
                     <and>
                        <instanceof
                              value="org.eclipse.jdt.core.IJavaProject">
                        </instanceof>
                        <test
                              property="org.springsource.ide.eclipse.commons.java.projectNature"
                              value="org.eclipse.m2e.core.maven2Nature">
                        </test>
                        <test
                              forcePluginActivation="true"
                              property="org.springsource.ide.eclipse.boot.javaelement.isInBootProject">
                        </test>
                        <test
                              property="org.springsource.ide.eclipse.boot.javaelement.isInBootProjectWithDevTools">
                        </test>
                     </and>
                  </or>
               </iterate>
            </and>
         </visibleWhen>
      </command>
      <command
            commandId="org.springframework.ide.eclipse.boot.ui.EnableDisableBootDevtools"
            id="org.springframework.ide.eclipse.boot.ui.AddDevTools"
            label="Add DevTools"
            style="push">
         <visibleWhen
               checkEnabled="false">
            <and>
               <count
                     value="1">
               </count>
               <iterate>
                  <or>
                     <adapt
                           type="org.eclipse.core.resources.IResource">
                        <or>
                           <adapt
                                 type="org.eclipse.core.resources.IProject">
                              <and>
                                 <test
                                       property="org.eclipse.core.resources.projectNature"
                                       value="org.eclipse.m2e.core.maven2Nature">
                                 </test>
                                 <test
                                       forcePluginActivation="true"
                                       property="org.springsource.ide.eclipse.boot.isBootProject">
                                 </test>
                                 <not>
                                    <test
                                          property="org.springsource.ide.eclipse.boot.hasBootDevTools">
                                    </test>
                                 </not>
                              </and>
                           </adapt>
                           <test
                                 property="org.eclipse.core.resources.name"
                                 value="pom.xml">
                           </test>
                        </or>
                     </adapt>
                     <and>
                        <instanceof
                              value="org.eclipse.jdt.core.IJavaProject">
                        </instanceof>
                        <test
                              property="org.springsource.ide.eclipse.commons.java.projectNature"
                              value="org.eclipse.m2e.core.maven2Nature">
                        </test>
                        <test
                              forcePluginActivation="true"
                              property="org.springsource.ide.eclipse.boot.javaelement.isInBootProject">
                        </test>
                        <not>
                           <test
                                 property="org.springsource.ide.eclipse.boot.javaelement.isInBootProjectWithDevTools">
                           </test>
                        </not>
                     </and>
                  </or>
               </iterate>
            </and>
         </visibleWhen>
      </command>
   </menuContribution>
</extension>

</plugin>
